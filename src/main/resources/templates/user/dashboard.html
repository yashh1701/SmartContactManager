<!doctype html>
<html lang="en"
      data-th-replace="~{base :: parent(~{::#content}, ~{::title}, ~{::script})}"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Dashboard</title>
</head>

<body>

<div id="content">

    <!-- Sidebar -->
    <div data-th-if="${loggedInUser}">
        <div data-th-replace="~{user/sidebar :: sidebar}"></div>
    </div>

    <!-- Main -->
    <div class="sm:pl-64 pt-20 bg-gray-100 dark:bg-gray-900 min-h-screen">

        <div class="px-8 pt-3">

            <!-- ======================================= -->
            <!-- WELCOME BANNER FIXED -->
            <!-- ======================================= -->
            <div class="bg-white dark:bg-gray-800 shadow-md rounded-2xl p-6 flex items-center gap-6 mb-8">

                <img data-th-if="${loggedInUser.profilePic}"
                     data-th-src="@{${loggedInUser.profilePic}}"
                     class="w-20 h-20 rounded-full object-cover border-4 border-gray-200 dark:border-gray-700">

                <img data-th-if="${loggedInUser.profilePic == null}"
                     src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS5TPu3HoTZkTyxzVY6h3fuKo-nPU85G5u4Vw&s"
                     class="w-20 h-20 rounded-full object-cover border-4 border-gray-200 dark:border-gray-700">

                <div>
                    <h1 class="text-3xl font-bold text-gray-900 dark:text-white"
                        data-th-text="'Welcome, ' + ${loggedInUser.name}">
                    </h1>

                    <p class="text-gray-500 dark:text-gray-300 text-sm">
                        Manage your contacts effortlessly.
                    </p>
                </div>

            </div>


            <!-- ======================================= -->
            <!-- STATS -->
            <!-- ======================================= -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">

                <!-- TOTAL CONTACTS -->
                <div class="bg-white dark:bg-gray-800 shadow rounded-xl p-6">
                    <p class="uppercase text-xs text-gray-500 dark:text-gray-300">
                        Total Contacts
                    </p>

                    <h2 class="text-4xl font-bold text-indigo-600 mt-3"
                        data-th-text="${loggedInUser.contacts.size()}"></h2>
                </div>

                <!-- FAVOURITE -->
                <div class="bg-white dark:bg-gray-800 shadow rounded-xl p-6">
                    <p class="uppercase text-xs text-gray-500 dark:text-gray-300">
                        Favourite
                    </p>

                    <h2 class="text-4xl font-bold text-indigo-600 mt-3"
                        data-th-text="${favouriteCount}"></h2>
                </div>

                <!-- PHONE -->
                <div class="bg-white dark:bg-gray-800 shadow rounded-xl p-6">
                    <p class="uppercase text-xs text-gray-500 dark:text-gray-300">
                        Email 
                    </p>

                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mt-3"
                        data-th-text="${loggedInUser.email}">
                    </h2>
                </div>

            </div>


            <!-- ======================================= -->
            <!-- QUICK ACTIONS -->
            <!-- ======================================= -->
            <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-3 mt-4">
                Quick Actions
            </h2>

            <div class="flex flex-wrap gap-4 mb-14">

                <a href="/user/contacts/add"
                   class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium shadow">
                    ‚ûï Add New Contact
                </a>

                <a href="/user/contacts"
                   class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white px-6 py-3 rounded-lg font-medium shadow">
                    üìÅ Manage Contacts
                </a>

                <a href="/user/profile"
                   class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white px-6 py-3 rounded-lg font-medium shadow">
                    üë§ View Profile
                </a>

            </div>


            <!-- ======================================= -->
            <!-- RECENT CONTACTS TABLE -->
            <!-- ======================================= -->
            <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 mt-4">
                Recent Contacts
            </h2>

            <div class="bg-white dark:bg-gray-800 shadow rounded-xl overflow-hidden">

                <table class="w-full">

                    <thead class="text-xs bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 uppercase">
                    <tr>
                        <th class="px-6 py-3 text-left">Name</th>
                        <th class="px-6 py-3 text-left">Email</th>
                        <th class="px-6 py-3 text-left">Phone</th>
                    </tr>
                    </thead>

                    <tbody data-th-each="c : ${recentContacts}">
                    <tr class="border-b dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700">

                        <td class="px-6 py-3" data-th-text="${c.name}"></td>
                        <td class="px-6 py-3" data-th-text="${c.email}"></td>
                        <td class="px-6 py-3" data-th-text="${c.phoneNumber}"></td>

                    </tr>
                    </tbody>

                    <tbody data-th-if="${#lists.isEmpty(recentContacts)}">
                    <tr>
                        <td colspan="3" class="py-6 text-center text-gray-500 dark:text-gray-300">
                            You have no recent contacts.
                        </td>
                    </tr>
                    </tbody>

                </table>

            </div>

        </div>

    </div>

</div>


<script>
    console.log("Dashboard Loaded");
</script>

</body>
</html>
