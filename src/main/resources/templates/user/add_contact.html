<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en"
      th:replace="~{base :: parent(~{::#content},~{::title},~{::script})}">

<head>
    <title>Add Contact</title>
</head>

<body>

<div id="content" class="bg-gray-50 dark:bg-gray-900 min-h-screen">

    <!-- Sidebar -->
    <div th:if="${loggedInUser}">
        <div data-th-replace="~{user/sidebar :: sidebar}"></div>
    </div>

    <!-- Page Body -->
    <div class="sm:pl-64 pt-24 pb-16">

        <div class="max-w-5xl mx-auto px-6">

            <!-- Page Header -->
            <div class="mb-10">
                <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white">
                    Add New Contact
                </h1>
                <p class="mt-2 text-gray-600 dark:text-gray-300 max-w-2xl">
                    Store contacts securely in the cloud and manage communication effortlessly.
                </p>
            </div>

            <!-- Message Box -->
            <div th:replace="~{message :: messagebox}"></div>

            <!-- Form Card -->
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 md:p-12">

                <form class="space-y-8"
                      th:action="@{/user/contacts/add}"
                      method="post"
                      th:object="${contactform}"
                      enctype="multipart/form-data">

                    <!-- BASIC INFO -->
                    <div>
                        <h2 class="text-xl font-bold text-indigo-600 mb-6">
                            Basic Information
                        </h2>

                        <div class="grid md:grid-cols-2 gap-6">

                            <!-- Name -->
                            <div>
                                <label class="block mb-2 text-sm font-medium">Contact Name</label>
                                <input type="text" th:field="*{name}"
                                       placeholder="Enter your contact name"
                                       class="w-full rounded-lg border px-4 py-3 text-sm
                                              bg-gray-50 dark:bg-gray-700 dark:border-gray-600
                                              focus:ring-indigo-500 focus:border-indigo-500">
                                <span class="text-red-500 text-sm"
                                      th:if="${#fields.hasErrors('name')}"
                                      th:errors="*{name}"></span>
                            </div>

                            <!-- Email -->
                            <div>
                                <label class="block mb-2 text-sm font-medium">Email</label>
                                <input type="text" th:field="*{email}"
                                       placeholder="Enter your contact email"
                                       class="w-full rounded-lg border px-4 py-3 text-sm
                                              bg-gray-50 dark:bg-gray-700 dark:border-gray-600
                                              focus:ring-indigo-500 focus:border-indigo-500">
                                <span class="text-red-500 text-sm"
                                      th:if="${#fields.hasErrors('email')}"
                                      th:errors="*{email}"></span>
                            </div>

                            <!-- Phone -->
                            <div>
                                <label class="block mb-2 text-sm font-medium">Phone Number</label>
                                <input type="text" th:field="*{phoneNumber}"
                                       placeholder="Enter contact mobile number"
                                       class="w-full rounded-lg border px-4 py-3 text-sm
                                              bg-gray-50 dark:bg-gray-700 dark:border-gray-600
                                              focus:ring-indigo-500 focus:border-indigo-500">
                                <span class="text-red-500 text-sm"
                                      th:if="${#fields.hasErrors('phoneNumber')}"
                                      th:errors="*{phoneNumber}"></span>
                            </div>

                        </div>
                    </div>

                    <!-- ADDRESS & DESCRIPTION -->
                    <div>
                        <h2 class="text-xl font-bold text-indigo-600 mb-6">
                            Additional Details
                        </h2>

                        <div class="grid md:grid-cols-2 gap-6">

                            <textarea th:field="*{address}" rows="4"
                                      placeholder="Enter contact's address"
                                      class="w-full rounded-lg border px-4 py-3 text-sm
                                             bg-gray-50 dark:bg-gray-700 dark:border-gray-600"></textarea>

                            <textarea th:field="*{description}" rows="4"
                                      placeholder="Add contact's description"
                                      class="w-full rounded-lg border px-4 py-3 text-sm
                                             bg-gray-50 dark:bg-gray-700 dark:border-gray-600"></textarea>
                        </div>
                    </div>

                    <!-- SOCIAL LINKS -->
                    <div>
                        <h2 class="text-xl font-bold text-indigo-600 mb-6">
                            Social & Web Links
                        </h2>

                        <div class="grid md:grid-cols-2 gap-6">

                            <input th:field="*{websiteLink}"
                                   placeholder="Website URL"
                                   class="w-full rounded-lg border px-4 py-3 text-sm
                                          bg-gray-50 dark:bg-gray-700 dark:border-gray-600">

                            <input th:field="*{linkedinLink}"
                                   placeholder="LinkedIn URL"
                                   class="w-full rounded-lg border px-4 py-3 text-sm
                                          bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        </div>
                    </div>

                    <!-- IMAGE UPLOAD -->
                    <div>
                        <h2 class="text-xl font-bold text-indigo-600 mb-6">
                            Contact Image
                        </h2>

                        <input type="file" th:field="*{contactImage}"
                               id="image_file_input"
                               class="block w-full text-sm rounded-lg
                                      border bg-gray-50 dark:bg-gray-700 dark:border-gray-600">

                        <img id="upload_image_preview"
                             class="max-h-48 mx-auto mt-4 rounded-xl shadow"
                             alt="">
                    </div>

                    <!-- FAVORITE -->
                    <div class="flex items-center gap-3">
                        <input type="checkbox" th:field="*{favourite}"
                               class="w-4 h-4 text-indigo-600 rounded">
                        <label class="text-sm font-medium">
                            Mark as favourite contact
                        </label>
                    </div>

                    <!-- ACTION BUTTONS -->
                    <div class="flex justify-center gap-6 pt-6">

                        <button type="submit"
                                class="px-8 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-700
                                       text-white font-semibold shadow transition">
                            Save Contact
                        </button>

                        <button type="reset"
                                class="px-8 py-3 rounded-xl bg-gray-200 hover:bg-gray-300
                                       dark:bg-gray-700 dark:hover:bg-gray-600
                                       text-gray-900 dark:text-white font-semibold shadow transition">
                            Reset
                        </button>

                    </div>

                </form>

            </div>

        </div>

    </div>

</div>

<script th:src="@{'/js/admin.js'}"></script>
<script>
    console.log("Add Contact page loaded");
</script>

</body>
</html>
